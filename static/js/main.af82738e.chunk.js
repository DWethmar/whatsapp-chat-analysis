(this["webpackJsonpwhatsapp-chat-analysis"]=this["webpackJsonpwhatsapp-chat-analysis"]||[]).push([[0],{156:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(45),l=a.n(s),c=(a(57),a(9)),i=(a(58),a(59),function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"WhatsApp Chat Analysis"),r.a.createElement("p",null,"Upload a Whatsapp chat archive to view the messages and stats."),r.a.createElement("p",null,"Everything is done in the browser, so no data is sent to a server and the data does not persists after a page refresh. But don't use this is you have ",r.a.createElement("b",null,"any")," privacy concerns."),r.a.createElement("p",null,"Click ",r.a.createElement("a",{href:"https://faq.whatsapp.com/en/android/23756533/"},"here ")," to find out how to export a chat on android."),r.a.createElement("p",null,r.a.createElement("a",{download:!0,href:"https://raw.githubusercontent.com/DWethmar/whatsapp-chat-analysis/master/public/_chat.txt"},"Example Whatsapp chat")))}),o=function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"file",className:"input-file",accept:".txt",onChange:function(t){return!!t.target&&!!t.target.files&&(a=t.target.files[0],void e.setFile(a));var a}}))},m=a(4),u=a.n(m);var d=a(51),h=a(46),p=a(47),f=(a(153),a(155)(["tol","qualitative"],50,0).map((function(e){return"#".concat(e)})));function g(e){return f[e%f.length]}var E=function(e){var t=e.messages;if(!Array.isArray(t)||0===t.length)return r.a.createElement("span",null,"Chart has no data.");var a,n={},s="",l=Object(h.a)(t);try{for(l.s();!(a=l.n()).done;){var c=a.value,i="";switch(e.interval){case"minute":i=u()(c.dateTime).startOf("minute").format("DD/MM/YYYY HH:mm"),s="DD/MM/YYYY HH:mm";break;case"hour":i=u()(c.dateTime).startOf("hour").format("DD/MM/YYYY HH:mm"),s="DD/MM/YYYY HH:mm";break;case"day":i=u()(c.dateTime).format("DD/MM/YYYY"),s="DD/MM/YYYY";break;case"week":i=u()(c.dateTime).startOf("week").format("DD/MM/YYYY"),s="DD/MM/YYYY";break;case"month":i=u()(c.dateTime).format("MM/YYYY"),s="MM/YYYY"}n.hasOwnProperty(c.sender)||(n[c.sender]={}),n[c.sender].hasOwnProperty(i)||(n[c.sender][i]=0),n[c.sender][i]++}}catch(f){l.e(f)}finally{l.f()}var o={datasets:Object(d.a)(Object.keys(n).map((function(e,t){return{label:e,data:Object.entries(n[e]).map((function(e){return{x:e[0],y:e[1]}})),fill:!1,borderColor:"Whatsapp"===e?"#075E54":g(t)}})))};console.log(o);var m={responsive:!0,animation:!1,elements:{line:{tension:0}},title:{display:!0,text:"Messages over time."},plugins:{zoom:{pan:{enabled:!0,mode:"x"},zoom:{enabled:!0,mode:"x"}}},scales:{xAxes:[{type:"time",time:{parser:s},scaleLabel:{display:!0,labelString:"Date"}}],yAxes:[{scaleLabel:{display:!0,labelString:"Number of messages"},ticks:{stepSize:1,beginAtZero:!0}}]}};return r.a.createElement(p.a,{data:o,options:m})},v=a(50),b=a(49),Y=(a(156),function(e){var t=function(t){var a=t.index,n=t.style,s=e.messages[a];return r.a.createElement("div",{style:n,key:a,className:"message-list__row"},r.a.createElement("div",{className:"message"+(a%2===0?" even":" odd")},r.a.createElement("div",{className:"message__sender"+(s.isWhatsApp?" message__sender--whatsapp":"")},s.sender),r.a.createElement("div",{className:"message__date-time"},s.dateTime.toLocaleString()),r.a.createElement("div",{className:"message__message",title:s.message},s.message.split("\n").map((function(e,t){return r.a.createElement("p",{key:t},e)})))))};return r.a.createElement("div",{className:"message-list"},r.a.createElement(b.a,null,(function(a){var n=a.height,s=a.width;return r.a.createElement(v.a,{height:n,itemCount:e.messages.length,itemSize:40,width:s},t)})))}),y=new Worker("/whatsapp-chat-analysis/workers/parse-archive.js");var M=function(){var e=Object(n.useState)(),t=Object(c.a)(e,2),a=t[0],s=t[1],l=Object(n.useState)(),m=Object(c.a)(l,2),u=m[0],d=m[1],h=Object(n.useState)(0),p=Object(c.a)(h,2),f=p[0],g=p[1],v=Object(n.useState)([]),b=Object(c.a)(v,2),M=b[0],w=b[1],O=Object(n.useState)("month"),D=Object(c.a)(O,2),j=D[0],k=D[1];return Object(n.useEffect)((function(){var e=function(e){e.data.hasOwnProperty("percentage")&&g(Math.round(e.data.percentage)),e.data.hasOwnProperty("messages")&&w(e.data.messages)};return y.addEventListener("message",e,!1),function(){return y.removeEventListener("message",e)}})),Object(n.useEffect)((function(){Array.isArray(u)&&(g(0),w([]),y.postMessage(u))}),[u]),Object(n.useEffect)((function(){var e=[];a&&function(e,t,a,n){var r=new TextDecoder,s=0,l=0,c="",i=new FileReader;function o(){if(l!==t){if(0!==s&&s>=e.size)return a(c),void n();var r=e.slice(s,s+5e4);i.readAsArrayBuffer(r)}else n()}i.onload=function(){var e=(c+=r.decode(i.result,{stream:!0})).split("\n");c=e.pop(),(l+=e.length)>t&&(e.length-=l-t,l=t);for(var n=0;n<e.length;++n)a(e[n]+"\n");s+=5e4,o()},i.onerror=function(){n(i.error)},o()}(a,1e9,(function(t){return e.push(t)}),(function(t){if(t)throw t;d(e)}))}),[a]),r.a.createElement("div",{className:"App"},r.a.createElement(i,null),r.a.createElement(o,{setFile:s}),r.a.createElement("br",null),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"file size:"),r.a.createElement("td",null,a?function(e){if(0===e)return"0 Byte";var t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t))+" "+["Bytes","KB","MB","GB","TB"][t]}(a.size):0)),r.a.createElement("tr",null,r.a.createElement("td",null,"Messages:"),r.a.createElement("td",null,M.length),r.a.createElement("td",null,"\xa0 ",f,"%")))),r.a.createElement("hr",null),100===f&&M.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,{messages:M}),r.a.createElement("hr",null),r.a.createElement("select",{value:j,onChange:function(e){return k(e.target.value)}},["day","week","month"].map((function(e,t){return r.a.createElement("option",{value:e},e)}))),r.a.createElement(E,{messages:M,interval:j})))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root"))},52:function(e,t,a){e.exports=a(157)},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){}},[[52,1,2]]]);
//# sourceMappingURL=main.af82738e.chunk.js.map