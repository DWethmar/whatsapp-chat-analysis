(this["webpackJsonpwhatsapp-chat-analysis"]=this["webpackJsonpwhatsapp-chat-analysis"]||[]).push([[0],{156:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(45),l=a.n(s),c=(a(57),a(12)),o=(a(58),a(59),function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"WhatsApp Chat Analysis"),r.a.createElement("p",null,"Upload a Whatsapp chat archive to view the messages and stats."),r.a.createElement("p",null,"Everything is done in the browser, so no data is sent to a server and the data does not persists after a page refresh. But don't use this is you have ",r.a.createElement("b",null,"any")," privacy concerns."),r.a.createElement("p",null,"Click ",r.a.createElement("a",{href:"https://faq.whatsapp.com/en/android/23756533/"},"here ")," to find out how to export a chat on android."),r.a.createElement("p",null,r.a.createElement("a",{download:!0,href:"https://raw.githubusercontent.com/DWethmar/whatsapp-chat-analysis/master/public/_chat.txt"},"Example Whatsapp chat")))}),i=function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"file",className:"input-file",accept:".txt",onChange:function(t){return!!t.target&&!!t.target.files&&(a=t.target.files[0],void e.setFile(a));var a}}))},m=a(4),u=a.n(m);var d=a(51),h=a(46),f=a(47),p=(a(153),a(155)(["tol","qualitative"],50,0).map((function(e){return"#".concat(e)})));function g(e){return p[e%p.length]}var v=function(e){var t=e.messages;if(!Array.isArray(t)||0===t.length)return r.a.createElement("span",null,"Chart has no data.");var a,n={},s="",l=Object(h.a)(t);try{for(l.s();!(a=l.n()).done;){var c=a.value,o="";switch(e.interval){case"minute":o=u()(c.dateTime).startOf("minute").format("DD/MM/YYYY HH:mm"),s="DD/MM/YYYY HH:mm";break;case"hour":o=u()(c.dateTime).startOf("hour").format("DD/MM/YYYY HH:mm"),s="DD/MM/YYYY HH:mm";break;case"day":o=u()(c.dateTime).format("DD/MM/YYYY"),s="DD/MM/YYYY";break;case"month":o=u()(c.dateTime).startOf("month").format("MM/YYYY"),s="MM/YYYY"}n.hasOwnProperty(c.sender)||(n[c.sender]={}),n[c.sender].hasOwnProperty(o)||(n[c.sender][o]=0),n[c.sender][o]++}}catch(p){l.e(p)}finally{l.f()}var i={datasets:Object(d.a)(Object.keys(n).map((function(e,t){return{label:e,data:Object.entries(n[e]).map((function(e){return{x:e[0],y:e[1]}})),fill:!1,borderColor:g(t)}})))},m={responsive:!0,elements:{line:{tension:0}},title:{display:!0,text:"Messages over time."},plugins:{zoom:{pan:{enabled:!0,mode:"x"},zoom:{enabled:!0,mode:"x"}}},scales:{xAxes:[{type:"time",time:{parser:s},scaleLabel:{display:!0,labelString:"Date"}}],yAxes:[{scaleLabel:{display:!0,labelString:"Number of messages"},ticks:{stepSize:1,beginAtZero:!0}}]}};return r.a.createElement(f.a,{data:i,options:m})},E=a(50),b=a(49),y=(a(156),function(e){var t=function(t){var a=t.index,n=t.style,s=e.messages[a];return r.a.createElement("div",{style:n,key:a,className:"message-list__row"},r.a.createElement("div",{className:"message"+(a%2==0?" even":" odd")},r.a.createElement("div",{className:"message__sender"},s.sender),r.a.createElement("div",{className:"message__date-time"},s.dateTime.toLocaleString()),r.a.createElement("div",{className:"message__message"},s.message)))};return r.a.createElement("div",{className:"message-list"},r.a.createElement(b.a,null,(function(a){var n=a.height,s=a.width;return r.a.createElement(E.a,{height:n,itemCount:e.messages.length,itemSize:40,width:s},t)})))}),w=new Worker("/whatsapp-chat-analysis/workers/parse-archive.js");var Y=function(){var e=Object(n.useState)(),t=Object(c.a)(e,2),a=t[0],s=t[1],l=Object(n.useState)(),m=Object(c.a)(l,2),u=m[0],d=m[1],h=Object(n.useState)(0),f=Object(c.a)(h,2),p=f[0],g=f[1],E=Object(n.useState)([]),b=Object(c.a)(E,2),Y=b[0],M=b[1];return Object(n.useEffect)((function(){var e=function(e){e.data.hasOwnProperty("percentage")&&g(Math.round(e.data.percentage)),e.data.hasOwnProperty("messages")&&M(e.data.messages)};return w.addEventListener("message",e,!1),function(){return w.removeEventListener("message",e)}})),Object(n.useEffect)((function(){Array.isArray(u)&&(g(0),M([]),w.postMessage(u))}),[u]),Object(n.useEffect)((function(){var e=[];a&&function(e,t,a,n){var r=new TextDecoder,s=0,l=0,c="",o=new FileReader;function i(){if(l!==t){if(0!==s&&s>=e.size)return a(c),void n();var r=e.slice(s,s+5e4);o.readAsArrayBuffer(r)}else n()}o.onload=function(){var e=(c+=r.decode(o.result,{stream:!0})).split("\n");c=e.pop(),(l+=e.length)>t&&(e.length-=l-t,l=t);for(var n=0;n<e.length;++n)a(e[n]+"\n");s+=5e4,i()},o.onerror=function(){n(o.error)},i()}(a,1e9,(function(t){return e.push(t)}),(function(t){if(t)throw t;d(e)}))}),[a]),r.a.createElement("div",{className:"App"},r.a.createElement(o,null),r.a.createElement(i,{setFile:s}),r.a.createElement("br",null),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"file size:"),r.a.createElement("td",null,a?function(e){if(0===e)return"0 Byte";var t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t))+" "+["Bytes","KB","MB","GB","TB"][t]}(a.size):0)),r.a.createElement("tr",null,r.a.createElement("td",null,"Messages:"),r.a.createElement("td",null,Y.length),r.a.createElement("td",null,"\xa0 ",p,"%")))),r.a.createElement("hr",null),r.a.createElement(y,{messages:Y}),r.a.createElement(v,{messages:Y,interval:"month"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},52:function(e,t,a){e.exports=a(157)},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){}},[[52,1,2]]]);
//# sourceMappingURL=main.b6a0a07a.chunk.js.map