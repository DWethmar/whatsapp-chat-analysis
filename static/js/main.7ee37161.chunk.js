(this["webpackJsonpwhatsapp-chat-analysis"]=this["webpackJsonpwhatsapp-chat-analysis"]||[]).push([[0],{158:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(44),s=a.n(l),c=(a(55),a(9)),o=a(45),i=a.n(o),m=(a(61),a(62),function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"WhatsApp Chat Analysis"),r.a.createElement("p",null,"Upload a Whatsapp chat archive to view the messages and stats."),r.a.createElement("p",null,"Everything is done in the browser, so no data is sent to a server. But don't use this is you have ",r.a.createElement("b",null,"any")," privacy concerns."),r.a.createElement("p",null,"Click ",r.a.createElement("a",{href:"https://faq.whatsapp.com/en/android/23756533/"},"here ")," to find out how to export a chat on android."),r.a.createElement("p",null,r.a.createElement("a",{download:!0,href:"/whatsapp-chat-analysis/_chat.txt"},"Download example Whatsapp chat")))}),u=function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"file",className:"input-file",accept:".txt",onChange:function(t){return!!t.target&&!!t.target.files&&(a=t.target.files[0],void e.setFile(a));var a}}))},d=a(4),h=a.n(d);var p=a(49),f=a(46),g=a(47),E=(a(155),a(157)(["tol","qualitative"],50,0).map((function(e){return"#".concat(e)})));function v(e){return E[e%E.length]}var b=function(e){var t=e.messages;if(!Array.isArray(t)||0===t.length)return r.a.createElement("span",null,"Chart has no data.");var a,n={},l="",s=Object(f.a)(t);try{for(s.s();!(a=s.n()).done;){var c=a.value,o="";switch(e.interval){case"minute":o=h()(c.dateTime).startOf("minute").format("DD/MM/YYYY HH:mm"),l="DD/MM/YYYY HH:mm";break;case"hour":o=h()(c.dateTime).startOf("hour").format("DD/MM/YYYY HH:mm"),l="DD/MM/YYYY HH:mm";break;case"day":o=h()(c.dateTime).format("DD/MM/YYYY"),l="DD/MM/YYYY";break;case"month":o=h()(c.dateTime).startOf("month").format("MM/YYYY"),l="MM/YYYY"}n.hasOwnProperty(c.sender)||(n[c.sender]={}),n[c.sender].hasOwnProperty(o)||(n[c.sender][o]=0),n[c.sender][o]++}}catch(u){s.e(u)}finally{s.f()}var i={datasets:Object(p.a)(Object.keys(n).map((function(e,t){return{label:e,data:Object.entries(n[e]).map((function(e){return{x:e[0],y:e[1]}})),fill:!1,borderColor:v(t)}})))},m={responsive:!0,elements:{line:{tension:0}},title:{display:!0,text:"Messages over time."},plugins:{zoom:{pan:{enabled:!0,mode:"x"},zoom:{enabled:!0,mode:"x"}}},scales:{xAxes:[{type:"time",time:{parser:l},scaleLabel:{display:!0,labelString:"Date"}}],yAxes:[{scaleLabel:{display:!0,labelString:"Number of messages"},ticks:{stepSize:1,beginAtZero:!0}}]}};return r.a.createElement(g.a,{data:i,options:m})},y=(a(158),function(e){return r.a.createElement("div",null,e.messages.map((function(e,t){return r.a.createElement("div",{className:"message",key:t},r.a.createElement("div",{className:"message__sender"},e.sender),r.a.createElement("div",{className:"message__date-time"},e.dateTime.toLocaleString()),r.a.createElement("div",{className:"message__message"},e.message))})))}),Y=new Worker("/whatsapp-chat-analysis/workers/parse-archive.js");var w=function(){var e=Object(n.useState)(0),t=Object(c.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)(),o=Object(c.a)(s,2),d=o[0],h=o[1],p=Object(n.useState)(),f=Object(c.a)(p,2),g=f[0],E=f[1],v=Object(n.useState)(0),w=Object(c.a)(v,2),M=w[0],O=w[1],j=Object(n.useState)([]),D=Object(c.a)(j,2),k=D[0],x=D[1];Object(n.useEffect)((function(){var e=function(e){e.data.hasOwnProperty("percentage")&&O(Math.round(e.data.percentage)),e.data.hasOwnProperty("messages")&&x(e.data.messages)};return Y.addEventListener("message",e,!1),function(){return Y.removeEventListener("message",e)}})),Object(n.useEffect)((function(){Array.isArray(g)&&(l(0),O(0),x([]),Y.postMessage(g))}),[g]),Object(n.useEffect)((function(){var e=[];d&&function(e,t,a,n){var r=new TextDecoder,l=0,s=0,c="",o=new FileReader;function i(){if(s!==t){if(0!==l&&l>=e.size)return a(c),void n();var r=e.slice(l,l+5e4);o.readAsArrayBuffer(r)}else n()}o.onload=function(){var e=(c+=r.decode(o.result,{stream:!0})).split("\n");c=e.pop(),(s+=e.length)>t&&(e.length-=s-t,s=t);for(var n=0;n<e.length;++n)a(e[n]+"\n");l+=5e4,i()},o.onerror=function(){n(o.error)},i()}(d,1e9,(function(t){return e.push(t)}),(function(t){if(t)throw t;E(e)}))}),[d]);var A=100!==M?[]:k.slice(15*a,15*a+15);return r.a.createElement("div",{className:"App"},r.a.createElement(m,null),r.a.createElement(u,{setFile:h}),r.a.createElement("br",null),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"file size:"),r.a.createElement("td",null,d?function(e){if(0===e)return"0 Byte";var t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t))+" "+["Bytes","KB","MB","GB","TB"][t]}(d.size):0)),r.a.createElement("tr",null,r.a.createElement("td",null,"Messages:"),r.a.createElement("td",null,k.length),r.a.createElement("td",null,"\xa0 ",M,"%")),r.a.createElement("tr",null,r.a.createElement("td",null,"Current page:"),r.a.createElement("td",null,a+1)))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement(i.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break",pageCount:Math.ceil(k.length/15),forcePage:a,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:function(e){l(e.selected)},containerClassName:"pagination",activeClassName:"active"}),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y,{messages:A}),r.a.createElement(b,{messages:k,interval:"month"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},50:function(e,t,a){e.exports=a(159)},55:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){}},[[50,1,2]]]);
//# sourceMappingURL=main.7ee37161.chunk.js.map