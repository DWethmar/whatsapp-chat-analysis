(this["webpackJsonpwhatsapp-chat-analysis"]=this["webpackJsonpwhatsapp-chat-analysis"]||[]).push([[0],{158:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(44),l=a.n(s),c=(a(55),a(9)),o=a(45),i=a.n(o),u=(a(61),a(62),function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"WhatsApp Chat Analysis"),r.a.createElement("p",null,"Upload a Whatsapp chat archive to view the messages and stats."),r.a.createElement("p",null,"Everything is done in the browser, so no data is send to a server. But don't use this is you have ",r.a.createElement("b",null,"any")," privacy concerns."),r.a.createElement("p",null,"Click ",r.a.createElement("a",{href:"https://faq.whatsapp.com/en/android/23756533/"},"here ")," to find out how to export a chat on android."))}),m=function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"file",className:"input-file",accept:".txt",onChange:function(t){return!!t.target&&!!t.target.files&&(a=t.target.files[0],void e.setFile(a));var a}}))},d=a(4),f=a.n(d);var h=a(49),p=a(46),g=a(47),v=(a(155),a(157)(["tol","qualitative"],50,0).map((function(e){return"#".concat(e)})));function E(e){return v[e%v.length]}var b=function(e){var t=e.messages;if(!Array.isArray(t)||0===t.length)return r.a.createElement("span",null,"Chart has no data.");var a,n={},s="",l=Object(p.a)(t);try{for(l.s();!(a=l.n()).done;){var c=a.value,o="";switch(e.interval){case"minute":o=f()(c.dateTime).startOf("minute").format("DD/MM/YYYY HH:mm"),s="DD/MM/YYYY HH:mm";break;case"hour":o=f()(c.dateTime).startOf("hour").format("DD/MM/YYYY HH:mm"),s="DD/MM/YYYY HH:mm";break;case"day":o=f()(c.dateTime).format("DD/MM/YYYY"),s="DD/MM/YYYY";break;case"month":o=f()(c.dateTime).startOf("month").format("MM/YYYY"),s="MM/YYYY"}n.hasOwnProperty(c.sender)||(n[c.sender]={}),n[c.sender].hasOwnProperty(o)||(n[c.sender][o]=0),n[c.sender][o]++}}catch(m){l.e(m)}finally{l.f()}var i={datasets:Object(h.a)(Object.keys(n).map((function(e,t){return{label:e,data:Object.entries(n[e]).map((function(e){return{x:e[0],y:e[1]}})),fill:!1,borderColor:E(t)}})))},u={responsive:!0,elements:{line:{tension:0}},title:{display:!0,text:"Messages over time."},plugins:{zoom:{pan:{enabled:!0,mode:"x"},zoom:{enabled:!0,mode:"x"}}},scales:{xAxes:[{type:"time",time:{parser:s},scaleLabel:{display:!0,labelString:"Date"}}],yAxes:[{scaleLabel:{display:!0,labelString:"Number of messages"},ticks:{stepSize:1,beginAtZero:!0}}]}};return r.a.createElement(g.a,{data:i,options:u})},y=(a(158),function(e){return r.a.createElement("div",null,e.messages.map((function(e,t){return r.a.createElement("div",{className:"message",key:t},r.a.createElement("div",{className:"message__sender"},e.sender),r.a.createElement("div",{className:"message__date-time"},e.dateTime.toLocaleString()),r.a.createElement("div",{className:"message__message"},e.message))})))}),Y=new Worker("/whatsapp-chat-analysis/workers/parse-archive.js");var M=function(){var e=Object(n.useState)(0),t=Object(c.a)(e,2),a=t[0],s=t[1],l=Object(n.useState)(),o=Object(c.a)(l,2),d=o[0],f=o[1],h=Object(n.useState)(),p=Object(c.a)(h,2),g=p[0],v=p[1],E=Object(n.useState)(0),M=Object(c.a)(E,2),w=M[0],O=M[1],j=Object(n.useState)([]),k=Object(c.a)(j,2),D=k[0],x=k[1];Object(n.useEffect)((function(){var e=function(e){e.data.hasOwnProperty("percentage")&&O(Math.round(e.data.percentage)),e.data.hasOwnProperty("messages")&&x(e.data.messages)};return Y.addEventListener("message",e,!1),function(){return Y.removeEventListener("message",e)}})),Object(n.useEffect)((function(){Array.isArray(g)&&(s(0),O(0),x([]),Y.postMessage(g))}),[g]),Object(n.useEffect)((function(){var e=[];d&&function(e,t,a,n){var r=new TextDecoder,s=0,l=0,c="",o=new FileReader;function i(){if(l!==t){if(0!==s&&s>=e.size)return a(c),void n();var r=e.slice(s,s+5e4);o.readAsArrayBuffer(r)}else n()}o.onload=function(){var e=(c+=r.decode(o.result,{stream:!0})).split("\n");c=e.pop(),(l+=e.length)>t&&(e.length-=l-t,l=t);for(var n=0;n<e.length;++n)a(e[n]+"\n");s+=5e4,i()},o.onerror=function(){n(o.error)},i()}(d,1e9,(function(t){return e.push(t)}),(function(t){if(t)throw t;v(e)}))}),[d]);var A=100!==w?[]:D.slice(15*a,15*a+15);return r.a.createElement("div",{className:"App"},r.a.createElement(u,null),r.a.createElement(m,{setFile:f}),r.a.createElement("br",null),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"file size:"),r.a.createElement("td",null,d?function(e){if(0===e)return"0 Byte";var t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t))+" "+["Bytes","KB","MB","GB","TB"][t]}(d.size):0)),r.a.createElement("tr",null,r.a.createElement("td",null,"Messages:"),r.a.createElement("td",null,D.length),r.a.createElement("td",null,"\xa0 ",w,"%")),r.a.createElement("tr",null,r.a.createElement("td",null,"Current page:"),r.a.createElement("td",null,a+1)))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement(i.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break",pageCount:Math.ceil(D.length/15),forcePage:a,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:function(e){s(e.selected)},containerClassName:"pagination",activeClassName:"active"}),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y,{messages:A}),r.a.createElement(b,{messages:D,interval:"month"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},50:function(e,t,a){e.exports=a(159)},55:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){}},[[50,1,2]]]);
//# sourceMappingURL=main.9fb163f1.chunk.js.map